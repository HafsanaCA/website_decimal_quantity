<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="cart_lines_decimal_qty" inherit_id="website_sale.cart_lines" name="Decimal Quantity in Cart Lines">
        <xpath expr="//input[contains(@class, 'js_quantity')]" position="replace">
            <input type="number"
               t-att-name="'input_quantity_' + str(line.product_id.id)"
               t-att-min="0"
               t-att-max="2"
               class="js_quantity form-control"
               t-att-value="('%.1f' % line.product_uom_qty) if line.product_id.allow_decimal_qty else int(line.product_uom_qty)"
               t-att-step="'0.1' if line.product_id.allow_decimal_qty else '1'"
               t-att-data-line-id="line.id"
               t-att-data-product-id="line.product_id.id"
               style="padding:4px 6px;" />
        </xpath>
    </template>

    <template id="custom_header_cart_link" inherit_id="website_sale.header_cart_link" name="Custom Header Cart Link" active="True">
        <xpath expr="." position="replace">
            <t t-nocache="The number of products is dynamic, this rendering cannot be cached."
               t-nocache-_icon="_icon"
               t-nocache-_text="_text"
               t-nocache-_badge="_badge"
               t-nocache-_badge_class="_badge_class"
               t-nocache-_icon_wrap_class="_icon_wrap_class"
               t-nocache-_text_class="_text_class"
               t-nocache-_item_class="_item_class"
               t-nocache-_link_class="_link_class">

                <t t-set="website_sale_cart_quantity" t-value="request.session['website_sale_cart_quantity'] if 'website_sale_cart_quantity' in request.session else website.sale_get_order().cart_quantity or 0"/>
                <t t-set="show_cart" t-value="website.has_ecommerce_access()"/>
                <li t-attf-class="#{_item_class} divider d-none"/>
                <li t-attf-class="o_wsale_my_cart #{not show_cart and 'd-none'} #{_item_class}">
                    <a href="/shop/cart" t-attf-class="#{_link_class}" aria-label="eCommerce cart">
                        <div t-attf-class="#{_icon_wrap_class}">
                            <i t-if="_icon" class="fa fa-shopping-cart fa-stack"/>
                            <sup t-attf-class="my_cart_quantity badge bg-primary #{_badge_class} #{'d-none' if (website_sale_cart_quantity == 0) else ''}"
                                 t-esc="'%.1f' % website_sale_cart_quantity if website_sale_cart_quantity % 1 else int(website_sale_cart_quantity)"
                                 t-att-data-order-id="request.session.get('sale_order_id', '')"/>
                        </div>
                        <span t-if="_text" t-attf-class="#{_text_class}">My Cart</span>
                    </a>
                </li>
            </t>
        </xpath>
    </template>
</odoo>